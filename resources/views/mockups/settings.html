<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¨­å®š - ã¿ã¾ã‚‚ã‚Šãƒ‡ãƒã‚¤ã‚¹ï¼ˆä»®ï¼‰</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
:root {
  --white: #ffffff;
  --cream: #faf9f7;
  --beige: #f5f4f0;
  --gray-100: #f0efeb;
  --gray-200: #e5e2dc;
  --gray-300: #d1ccc3;
  --gray-400: #a8a29e;
  --gray-500: #78716c;
  --gray-600: #57534e;
  --gray-700: #44403c;
  --gray-800: #292524;
  --green: #22c55e;
  --green-dark: #16a34a;
  --green-light: #dcfce7;
  --blue: #3b82f6;
  --blue-light: #eff6ff;
  --red: #ef4444;
  --red-light: #fef2f2;
  --yellow: #eab308;
  --yellow-light: #fef9c3;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
  --radius: 8px;
  --radius-lg: 12px;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Noto Sans JP', sans-serif; background: var(--cream); color: var(--gray-800); line-height: 1.6; min-height: 100vh; }

.header { background: var(--white); border-bottom: 1px solid var(--gray-200); padding: 16px 20px; position: sticky; top: 0; z-index: 100; }
.header-inner { max-width: 640px; margin: 0 auto; display: flex; align-items: center; gap: 16px; }
.back-btn { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; background: var(--beige); border: none; border-radius: var(--radius); cursor: pointer; font-size: 18px; transition: all 0.2s; text-decoration: none; color: var(--gray-700); }
.back-btn:hover { background: var(--gray-200); }
.header-title { font-size: 16px; font-weight: 600; flex: 1; }
.header-id { font-size: 13px; font-weight: 600; color: var(--gray-500); font-family: monospace; letter-spacing: 0.05em; }

.toast { position: fixed; top: 80px; left: 50%; transform: translateX(-50%) translateY(-20px); background: var(--gray-800); color: var(--white); padding: 12px 24px; border-radius: var(--radius); font-size: 14px; font-weight: 500; display: flex; align-items: center; gap: 8px; opacity: 0; visibility: hidden; transition: all 0.3s ease; z-index: 200; box-shadow: var(--shadow-md); }
.toast.show { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }
.toast-icon { color: var(--green); }

.container { max-width: 640px; margin: 0 auto; padding: 24px 20px; }

.section { background: var(--white); border-radius: var(--radius-lg); padding: 24px; margin-bottom: 20px; box-shadow: var(--shadow-sm); border: 1px solid var(--gray-200); }
.section-title { font-size: 15px; font-weight: 600; color: var(--gray-800); margin-bottom: 20px; display: flex; align-items: center; gap: 8px; padding-bottom: 12px; border-bottom: 2px solid var(--gray-200); }
.section-title span { font-size: 18px; }

.setting-item { display: flex; align-items: center; padding: 16px 0; border-bottom: 1px solid var(--gray-100); }
.setting-item:last-child { border-bottom: none; }
.setting-item:first-of-type { padding-top: 0; }
.setting-icon { width: 44px; height: 44px; background: var(--beige); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; margin-right: 16px; flex-shrink: 0; border: 1px solid var(--gray-200); }
.setting-content { flex: 1; min-width: 0; }
.setting-label { font-size: 15px; font-weight: 600; margin-bottom: 2px; color: var(--gray-800); }
.setting-value { font-size: 13px; color: var(--gray-500); font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.edit-link { font-size: 12px; color: var(--blue); text-decoration: none; margin-left: 8px; font-weight: 500; }
.edit-link:hover { text-decoration: underline; }
.setting-action { margin-left: 12px; flex-shrink: 0; }
.setting-item.locked { opacity: 0.6; }
.lock-icon { font-size: 14px; }

.toggle { position: relative; width: 52px; height: 30px; background: var(--gray-300); border-radius: 15px; cursor: pointer; transition: all 0.3s; border: none; }
.toggle.active { background: var(--green); }
.toggle::after { content: ''; position: absolute; top: 3px; left: 3px; width: 24px; height: 24px; background: var(--white); border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.15); transition: all 0.3s; }
.toggle.active::after { left: 25px; }

.premium-badge { display: inline-block; padding: 2px 8px; font-size: 11px; font-weight: 500; color: var(--white); background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; margin-left: 8px; }

/* ã‚¢ãƒ©ãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³å¼ï¼‰ */
.alert-options { display: flex; flex-direction: column; gap: 8px; }
.alert-option { display: flex; align-items: center; gap: 12px; padding: 14px 16px; border: 2px solid var(--gray-200); border-radius: var(--radius); cursor: pointer; transition: all 0.2s; }
.alert-option:hover { border-color: var(--gray-400); background: var(--gray-100); }
.alert-option.selected { border-color: var(--gray-800); background: var(--beige); }
.alert-radio { width: 20px; height: 20px; border: 2px solid var(--gray-300); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.alert-option.selected .alert-radio { border-color: var(--gray-800); }
.alert-option.selected .alert-radio::after { content: ''; width: 10px; height: 10px; background: var(--gray-800); border-radius: 50%; }
.alert-option-content { flex: 1; }
.alert-option-title { font-size: 15px; font-weight: 600; color: var(--gray-800); }
.alert-option-desc { font-size: 12px; color: var(--gray-500); margin-top: 2px; }
.alert-option-badge { font-size: 11px; font-weight: 600; padding: 4px 8px; border-radius: 4px; }
.alert-option-badge.default { background: var(--green-light); color: var(--green-dark); }

.alert-hint { font-size: 12px; color: var(--gray-500); margin-top: 12px; line-height: 1.6; }

.info-box { padding: 14px 16px; background: var(--blue-light); border-radius: var(--radius); font-size: 13px; color: var(--gray-700); line-height: 1.7; margin-top: 16px; }
.info-box strong { color: var(--gray-800); }

/* ãƒšãƒƒãƒˆé™¤å¤–è¨­å®š */
.feature-toggle { display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--beige); border-radius: var(--radius); margin-bottom: 20px; }
.feature-toggle-info { flex: 1; }
.feature-toggle-label { font-size: 15px; font-weight: 600; color: var(--gray-800); }
.feature-toggle-desc { font-size: 12px; color: var(--gray-500); margin-top: 2px; }

.pet-settings { transition: all 0.3s ease; overflow: hidden; }
.pet-settings.hidden { display: none; }

.form-group { margin-bottom: 20px; }
.form-label { display: block; font-size: 13px; font-weight: 600; color: var(--gray-700); margin-bottom: 8px; }
.form-hint { font-size: 11px; color: var(--gray-500); margin-top: 6px; }
.form-input { width: 100%; padding: 12px 14px; font-size: 16px; font-family: inherit; border: 1px solid var(--gray-300); border-radius: var(--radius); background: var(--cream); transition: all 0.2s; }
.form-input:focus { outline: none; border-color: var(--gray-500); background: var(--white); }

.input-with-unit { display: flex; align-items: center; gap: 8px; max-width: 200px; }
.input-with-unit input { flex: 1; text-align: right; }
.input-unit { font-size: 14px; font-weight: 500; color: var(--gray-600); min-width: 30px; }

.range-info { display: flex; justify-content: space-between; font-size: 10px; color: var(--gray-400); margin-top: 4px; max-width: 200px; }

.visual-preview { background: var(--beige); border-radius: var(--radius); padding: 20px; margin-top: 20px; text-align: center; }
.visual-preview-title { font-size: 12px; font-weight: 600; color: var(--gray-500); margin-bottom: 16px; }
#diagramCanvas { display: block; margin: 0 auto; background: var(--white); border-radius: var(--radius); border: 1px solid var(--gray-200); }

.area-display { text-align: center; margin-top: 16px; padding: 14px; background: var(--green-light); border-radius: var(--radius); }
.area-label { font-size: 12px; color: var(--gray-600); margin-bottom: 4px; }
.area-value { font-size: 20px; font-weight: 700; color: var(--green-dark); }

.legend { display: flex; justify-content: center; gap: 20px; margin-top: 12px; font-size: 12px; color: var(--gray-600); }
.legend-item { display: flex; align-items: center; gap: 6px; }
.legend-color { width: 16px; height: 16px; border-radius: 3px; }
.legend-color.detect { background: rgba(34, 197, 94, 0.3); border: 1px solid var(--green); }
.legend-color.exclude { background: rgba(168, 162, 158, 0.3); border: 1px solid var(--gray-400); }

.explanation-box { margin-top: 16px; padding: 14px 16px; background: var(--blue-light); border-radius: var(--radius); font-size: 13px; color: var(--gray-700); line-height: 1.7; }
.explanation-box strong { color: var(--gray-800); }

/* ãƒ‡ãƒã‚¤ã‚¹æƒ…å ± */
.info-row { display: flex; justify-content: space-between; align-items: center; padding: 14px 0; border-bottom: 1px solid var(--gray-100); }
.info-row:last-child { border-bottom: none; }
.info-row:first-of-type { padding-top: 0; }
.info-label { font-size: 14px; color: var(--gray-600); }
.info-value { font-size: 14px; font-weight: 600; color: var(--gray-800); }
.info-value.mono { font-family: monospace; letter-spacing: 0.05em; }

.nickname-input { padding: 10px 14px; font-size: 14px; font-family: inherit; border: 1px solid var(--gray-300); border-radius: var(--radius); background: var(--cream); width: 160px; text-align: right; transition: all 0.2s; }
.nickname-input:focus { outline: none; border-color: var(--gray-500); background: var(--white); }

/* Premiumãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ */
.premium-promo { background: linear-gradient(135deg, #667eea, #764ba2); border-radius: var(--radius-lg); padding: 24px; color: var(--white); text-align: center; margin-top: 20px; }
.premium-promo h3 { font-size: 18px; font-weight: 500; margin-bottom: 8px; }
.premium-promo p { font-size: 14px; opacity: 0.9; margin-bottom: 16px; }
.premium-promo-btn { display: inline-block; padding: 12px 24px; font-size: 14px; font-weight: 500; color: #667eea; background: var(--white); border: none; border-radius: var(--radius); cursor: pointer; transition: all 0.2s; text-decoration: none; }
.premium-promo-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }

/* ãƒ†ã‚¹ãƒˆé€šçŸ¥ãƒœã‚¿ãƒ³ */
.test-notify-section { margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--gray-200); }
.test-notify-btn { width: 100%; padding: 14px 20px; font-size: 14px; font-weight: 600; font-family: inherit; background: var(--beige); color: var(--gray-700); border: 1px solid var(--gray-300); border-radius: var(--radius); cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; }
.test-notify-btn:hover { background: var(--gray-200); }
.test-notify-btn:active { transform: scale(0.98); }
.test-notify-btn:disabled { opacity: 0.6; cursor: not-allowed; }
.test-notify-btn .spinner { display: none; width: 16px; height: 16px; border: 2px solid var(--gray-300); border-top-color: var(--gray-600); border-radius: 50%; animation: spin 0.8s linear infinite; }
.test-notify-btn.loading .spinner { display: block; }
.test-notify-btn.loading .btn-text { display: none; }
@keyframes spin { to { transform: rotate(360deg); } }
.test-notify-hint { font-size: 12px; color: var(--gray-500); margin-top: 8px; text-align: center; }

@media (max-width: 480px) {
  .input-with-unit { max-width: 100%; }
  .range-info { max-width: 100%; }
  .alert-option { padding: 12px 14px; }
  .nickname-input { width: 120px; }
}
  </style>
</head>
<body>
  <div id="toast" class="toast">
    <span class="toast-icon">âœ“</span>
    <span id="toastMessage">ä¿å­˜ã—ã¾ã—ãŸ</span>
  </div>

  <header class="header">
    <div class="header-inner">
      <a href="mypage.html" class="back-btn">â†</a>
      <h1 class="header-title">è¨­å®š</h1>
      <span class="header-id">A3K9X2</span>
    </div>
  </header>

  <div class="container">
    <!-- é€šçŸ¥æ–¹æ³• -->
    <section class="section">
      <h2 class="section-title"><span>ğŸ””</span>é€šçŸ¥æ–¹æ³•</h2>
      
      <div class="setting-item">
        <div class="setting-icon">ğŸ“§</div>
        <div class="setting-content">
          <p class="setting-label">ãƒ¡ãƒ¼ãƒ«é€šçŸ¥</p>
          <p class="setting-value"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4f2a372e223f232a0f2a222e2623612c2022">[email&#160;protected]</a> <a href="email-settings.html" class="edit-link">ç·¨é›†</a></p>
        </div>
        <div class="setting-action">
          <button class="toggle active" id="toggleEmail" onclick="toggleSetting(this)"></button>
        </div>
      </div>
      
      <div class="setting-item">
        <div class="setting-icon">ğŸ””</div>
        <div class="setting-content">
          <p class="setting-label">Webãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥</p>
          <p class="setting-value">ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§æœ‰åŠ¹</p>
        </div>
        <div class="setting-action">
          <button class="toggle active" id="togglePush" onclick="toggleSetting(this)"></button>
        </div>
      </div>
      
      <div class="setting-item locked">
        <div class="setting-icon">ğŸ’¬</div>
        <div class="setting-content">
          <p class="setting-label">SMSé€šçŸ¥<span class="premium-badge">Premium</span></p>
          <p class="setting-value">æœªè¨­å®š</p>
        </div>
        <div class="setting-action">
          <span class="lock-icon">ğŸ”’</span>
        </div>
      </div>
      
      <div class="setting-item locked">
        <div class="setting-icon">ğŸ“</div>
        <div class="setting-content">
          <p class="setting-label">é›»è©±é€šçŸ¥<span class="premium-badge">Premium</span></p>
          <p class="setting-value">æœªè¨­å®š</p>
        </div>
        <div class="setting-action">
          <span class="lock-icon">ğŸ”’</span>
        </div>
      </div>

      <!-- ãƒ†ã‚¹ãƒˆé€šçŸ¥ãƒœã‚¿ãƒ³ -->
      <div class="test-notify-section">
        <button class="test-notify-btn" id="testNotifyBtn" onclick="sendTestNotification()">
          <span class="spinner"></span>
          <span class="btn-text">ğŸ“¨ ãƒ†ã‚¹ãƒˆé€šçŸ¥ã‚’é€ä¿¡</span>
        </button>
        <p class="test-notify-hint">æœ‰åŠ¹ãªé€šçŸ¥å…ˆã«ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¾ã™ï¼ˆ1æ—¥3å›ã¾ã§ãƒ»æ®‹ã‚Š3å›ï¼‰</p>
      </div>
    </section>

    <!-- æœªæ¤œçŸ¥ã‚¢ãƒ©ãƒ¼ãƒˆ -->
    <section class="section">
      <h2 class="section-title"><span>â°</span>æœªæ¤œçŸ¥ã‚¢ãƒ©ãƒ¼ãƒˆ</h2>
      
      <div class="alert-options">
        <div class="alert-option" onclick="selectAlert(this, 12)">
          <div class="alert-radio"></div>
          <div class="alert-option-content">
            <p class="alert-option-title">12æ™‚é–“</p>
            <p class="alert-option-desc">æ—©æœŸç™ºè¦‹é‡è¦–ã€‚é »ç¹ã«å¤–å‡ºã—ãªã„æ–¹å‘ã‘</p>
          </div>
        </div>
        <div class="alert-option selected" onclick="selectAlert(this, 24)">
          <div class="alert-radio"></div>
          <div class="alert-option-content">
            <p class="alert-option-title">24æ™‚é–“</p>
            <p class="alert-option-desc">æ¨™æº–çš„ãªè¨­å®šã€‚å¤šãã®æ–¹ã«ãŠã™ã™ã‚</p>
          </div>
          <span class="alert-option-badge default">æ¨å¥¨</span>
        </div>
        <div class="alert-option" onclick="selectAlert(this, 36)">
          <div class="alert-radio"></div>
          <div class="alert-option-content">
            <p class="alert-option-title">36æ™‚é–“</p>
            <p class="alert-option-desc">å¤–å‡ºãŒå¤šã„æ–¹å‘ã‘</p>
          </div>
        </div>
        <div class="alert-option" onclick="selectAlert(this, 48)">
          <div class="alert-radio"></div>
          <div class="alert-option-content">
            <p class="alert-option-title">48æ™‚é–“</p>
            <p class="alert-option-desc">é•·æ™‚é–“å¤–å‡ºãŒå¤šã„æ–¹å‘ã‘</p>
          </div>
        </div>
        <div class="alert-option" onclick="selectAlert(this, 72)">
          <div class="alert-radio"></div>
          <div class="alert-option-content">
            <p class="alert-option-title">72æ™‚é–“</p>
            <p class="alert-option-desc">æœ€é•·è¨­å®šã€‚æ—…è¡ŒãŒå¤šã„æ–¹å‘ã‘</p>
          </div>
        </div>
      </div>
      
      <p class="alert-hint">äººã®å‹•ããŒæ¤œçŸ¥ã•ã‚Œãªã„æ™‚é–“ãŒã“ã®è¨­å®šã‚’è¶…ãˆã‚‹ã¨ã€é€šçŸ¥ãŒå±Šãã¾ã™ã€‚<br>å¤–æ³Šã‚„æ—…è¡Œæ™‚ã¯ã€Œã‚¿ã‚¤ãƒãƒ¼è¨­å®šã€æ©Ÿèƒ½ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚</p>

      <div class="info-box">
        <strong>ğŸ’¡ ã‚¢ãƒ©ãƒ¼ãƒˆæ™‚é–“ã®ç›®å®‰</strong><br>
        æ—©æœŸç™ºè¦‹ãŒé‡è¦ã§ã™ã€‚24æ™‚é–“ä»¥å†…ã§ã‚ã‚Œã°ã€ä¸‡ãŒä¸€ã®å ´åˆã‚‚äº‹æ•…ç‰©ä»¶åŒ–ã‚’é˜²ã’ã‚‹å¯èƒ½æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚
      </div>
    </section>

    <!-- ãƒšãƒƒãƒˆé™¤å¤–è¨­å®š -->
    <section class="section">
      <h2 class="section-title"><span>ğŸ±</span>ãƒšãƒƒãƒˆé™¤å¤–è¨­å®š</h2>
      
      <div class="feature-toggle">
        <div class="feature-toggle-info">
          <p class="feature-toggle-label">ãƒšãƒƒãƒˆé™¤å¤–æ©Ÿèƒ½</p>
          <p class="feature-toggle-desc">ãƒšãƒƒãƒˆã®æ¤œçŸ¥ã‚’é™¤å¤–ã—ã¦èª¤é€šçŸ¥ã‚’é˜²ãã¾ã™</p>
        </div>
        <button class="toggle active" id="petToggle" onclick="togglePetFeature()"></button>
      </div>

      <div class="pet-settings" id="petSettings">
        <div class="form-group">
          <label class="form-label">è¨­ç½®é«˜ã•ï¼ˆåºŠã‹ã‚‰ã‚»ãƒ³ã‚µãƒ¼ï¼‰</label>
          <div class="input-with-unit">
            <input type="number" class="form-input" id="installHeight" value="200" min="150" max="250" oninput="updateDiagram()" onblur="saveHeight()">
            <span class="input-unit">cm</span>
          </div>
          <div class="range-info"><span>ä¸‹é™: 150cm</span><span>ä¸Šé™: 250cm</span></div>
          <p class="form-hint">ãƒ‰ã‚¢æ ä¸Šéƒ¨ã®é«˜ã•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
        </div>

        <div class="visual-preview">
          <p class="visual-preview-title">è¨­ç½®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</p>
          <canvas id="diagramCanvas" width="280" height="280"></canvas>
          <div class="legend">
            <div class="legend-item"><div class="legend-color detect"></div>æ¤œçŸ¥ã‚¨ãƒªã‚¢</div>
            <div class="legend-item"><div class="legend-color exclude"></div>é™¤å¤–ã‚¨ãƒªã‚¢</div>
          </div>
          <div class="area-display">
            <p class="area-label">é™¤å¤–ã‚¨ãƒªã‚¢ï¼ˆè¨­ç½®é«˜ã•ã®åŠåˆ†ã‚ˆã‚Šä¸‹ï¼‰</p>
            <p class="area-value">åºŠã‹ã‚‰ <span id="excludeHeight">100</span>cm ã¾ã§</p>
          </div>
        </div>

        <div class="explanation-box">
          ğŸ’¡ <strong>æ¤œçŸ¥ã‚¨ãƒªã‚¢</strong>: äººé–“ãŒé€šã‚‹ã¨æ¤œçŸ¥ã—ã¦é€šçŸ¥ã—ã¾ã™<br>
          ã€€ <strong>é™¤å¤–ã‚¨ãƒªã‚¢</strong>: ãƒšãƒƒãƒˆãŒé€šã£ã¦ã‚‚æ¤œçŸ¥ã•ã‚Œã¾ã›ã‚“
        </div>
      </div>
    </section>

    <!-- ãƒ‡ãƒã‚¤ã‚¹æƒ…å ± -->
    <section class="section">
      <h2 class="section-title"><span>ğŸ“±</span>ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±</h2>
      <div class="info-row">
        <span class="info-label">ãƒ‡ãƒã‚¤ã‚¹ID</span>
        <span class="info-value mono">A3K9X2</span>
      </div>
      <div class="info-row">
        <span class="info-label">ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </span>
        <input type="text" class="nickname-input" id="nickname" placeholder="ä¾‹ï¼šãƒªãƒ“ãƒ³ã‚°" value="" onblur="saveNickname()">
      </div>
      <div class="info-row">
        <span class="info-label">åˆ©ç”¨é–‹å§‹</span>
        <span class="info-value">2025/01/10</span>
      </div>
      <div class="info-row">
        <span class="info-label">é›»æ± äº¤æ›ç›®å®‰</span>
        <span class="info-value">ç´„400æ—¥å¾Œ</span>
      </div>
    </section>

    <!-- ãŠæ”¯æ‰•ã„ãƒ»ãƒ—ãƒ©ãƒ³ -->
    <section class="section">
      <h2 class="section-title"><span>ğŸ’³</span>ãŠæ”¯æ‰•ã„ãƒ»ãƒ—ãƒ©ãƒ³</h2>
      <div class="setting-item" style="cursor: pointer;" onclick="location.href='plan.html'">
        <div class="setting-icon">ğŸ‘‘</div>
        <div class="setting-content">
          <p class="setting-label">ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³</p>
          <p class="setting-value">ç„¡æ–™ãƒ—ãƒ©ãƒ³</p>
        </div>
        <div class="setting-action">
          <span style="color: var(--gray-400);">â†’</span>
        </div>
      </div>
      <div class="setting-item" style="cursor: pointer;" onclick="location.href='payment-history.html'">
        <div class="setting-icon">ğŸ“‹</div>
        <div class="setting-content">
          <p class="setting-label">ãŠæ”¯æ‰•ã„å±¥æ­´</p>
          <p class="setting-value">éå»ã®æ±ºæ¸ˆãƒ»é ˜åæ›¸ã‚’ç¢ºèª</p>
        </div>
        <div class="setting-action">
          <span style="color: var(--gray-400);">â†’</span>
        </div>
      </div>
    </section>

    <!-- Premiumãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="premium-promo">
      <h3>ğŸŒŸ Premiumãƒ—ãƒ©ãƒ³ã§å®‰å¿ƒã‚’å¼·åŒ–</h3>
      <p>SMSãƒ»é›»è©±é€šçŸ¥ã€æ¯æ—¥ã®å®‰å¦ãƒ¬ãƒãƒ¼ãƒˆãŒåˆ©ç”¨å¯èƒ½ã«</p>
      <a href="plan.html" class="premium-promo-btn">Â¥500/æœˆ ã§å§‹ã‚ã‚‹</a>
    </div>
  </div>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
let alertHours = 24;

function showToast(message) {
  const toast = document.getElementById('toast');
  const toastMessage = document.getElementById('toastMessage');
  toastMessage.textContent = message || 'ä¿å­˜ã—ã¾ã—ãŸ';
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 2000);
}

function toggleSetting(el) {
  el.classList.toggle('active');
  showToast('ä¿å­˜ã—ã¾ã—ãŸ');
}

// ã‚¢ãƒ©ãƒ¼ãƒˆæ™‚é–“é¸æŠ
function selectAlert(el, hours) {
  document.querySelectorAll('.alert-option').forEach(opt => {
    opt.classList.remove('selected');
  });
  el.classList.add('selected');
  alertHours = hours;
  showToast('ä¿å­˜ã—ã¾ã—ãŸ');
}

// ãƒšãƒƒãƒˆé™¤å¤–æ©Ÿèƒ½
function togglePetFeature() {
  const toggle = document.getElementById('petToggle');
  const settings = document.getElementById('petSettings');
  toggle.classList.toggle('active');
  if (toggle.classList.contains('active')) {
    settings.classList.remove('hidden');
    updateDiagram();
  } else {
    settings.classList.add('hidden');
  }
  showToast('ä¿å­˜ã—ã¾ã—ãŸ');
}

let lastHeight = 200;
function saveHeight() {
  const input = document.getElementById('installHeight');
  let v = parseInt(input.value) || 200;
  if (v < 150) v = 150;
  if (v > 250) v = 250;
  input.value = v;
  if (v !== lastHeight) {
    lastHeight = v;
    showToast('ä¿å­˜ã—ã¾ã—ãŸ');
  }
}

// ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ä¿å­˜
function saveNickname() {
  showToast('ä¿å­˜ã—ã¾ã—ãŸ');
}

// ãƒ†ã‚¹ãƒˆé€šçŸ¥é€ä¿¡
function sendTestNotification() {
  const btn = document.getElementById('testNotifyBtn');
  const emailEnabled = document.getElementById('toggleEmail').classList.contains('active');
  const pushEnabled = document.getElementById('togglePush').classList.contains('active');
  
  if (!emailEnabled && !pushEnabled) {
    showToast('æœ‰åŠ¹ãªé€šçŸ¥å…ˆãŒã‚ã‚Šã¾ã›ã‚“');
    return;
  }
  
  // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
  btn.classList.add('loading');
  btn.disabled = true;
  
  // é€ä¿¡å…ˆã‚’åé›†
  const targets = [];
  if (emailEnabled) targets.push('ãƒ¡ãƒ¼ãƒ«');
  if (pushEnabled) targets.push('Webãƒ—ãƒƒã‚·ãƒ¥');
  
  // æ¨¡æ“¬çš„ãªé€ä¿¡å‡¦ç†ï¼ˆå®Ÿéš›ã¯APIã‚³ãƒ¼ãƒ«ï¼‰
  // TODO: 1æ—¥3å›ã®åˆ¶é™ãƒã‚§ãƒƒã‚¯ã‚’ã‚µãƒ¼ãƒãƒ¼å´ã§å®Ÿæ–½
  setTimeout(() => {
    btn.classList.remove('loading');
    btn.disabled = false;
    showToast('ãƒ†ã‚¹ãƒˆé€šçŸ¥ã‚’é€ä¿¡ã—ã¾ã—ãŸï¼ˆ' + targets.join('ãƒ»') + 'ï¼‰');
  }, 1500);
}

// Canvasæç”»
const canvas = document.getElementById('diagramCanvas');
const ctx = canvas.getContext('2d');

function updateDiagram() {
  let h = parseInt(document.getElementById('installHeight').value) || 200;
  if (h < 150) h = 150;
  if (h > 250) h = 250;
  const exH = Math.floor(h / 2);
  document.getElementById('excludeHeight').textContent = exH;

  const W = canvas.width, H = canvas.height;
  const floorY = H - 25, doorX = 75, doorW = 100;
  const scale = (floorY - 35) / 250;

  ctx.clearRect(0, 0, W, H);

  // åºŠ
  ctx.fillStyle = '#a8a29e';
  ctx.fillRect(20, floorY, W - 40, 3);

  // ãƒ‰ã‚¢æ 
  const doorTop = floorY - h * scale;
  ctx.strokeStyle = '#78716c';
  ctx.lineWidth = 4;
  ctx.beginPath();
  ctx.moveTo(doorX, floorY);
  ctx.lineTo(doorX, doorTop);
  ctx.lineTo(doorX + doorW, doorTop);
  ctx.lineTo(doorX + doorW, floorY);
  ctx.stroke();

  const boundaryY = floorY - exH * scale;

  // æ¤œçŸ¥ã‚¨ãƒªã‚¢
  ctx.fillStyle = 'rgba(34, 197, 94, 0.15)';
  ctx.fillRect(doorX + 2, doorTop + 2, doorW - 4, boundaryY - doorTop - 2);

  // é™¤å¤–ã‚¨ãƒªã‚¢
  ctx.fillStyle = 'rgba(168, 162, 158, 0.2)';
  ctx.fillRect(doorX + 2, boundaryY, doorW - 4, floorY - boundaryY);

  // ã‚»ãƒ³ã‚µãƒ¼
  const sX = doorX + doorW / 2;
  ctx.fillStyle = '#fff';
  ctx.strokeStyle = '#57534e';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(sX - 16, doorTop - 2);
  ctx.lineTo(sX + 16, doorTop - 2);
  ctx.lineTo(sX + 16, doorTop + 8);
  ctx.lineTo(sX - 16, doorTop + 8);
  ctx.closePath();
  ctx.fill();
  ctx.stroke();
  ctx.fillStyle = '#22c55e';
  ctx.beginPath();
  ctx.arc(sX, doorTop + 3, 2, 0, Math.PI * 2);
  ctx.fill();

  // ãƒ“ãƒ¼ãƒ 
  const sY = doorTop + 6;
  const beamH = boundaryY - sY;
  const spread = beamH * 0.15;
  const grad = ctx.createLinearGradient(sX, sY, sX, boundaryY);
  grad.addColorStop(0, 'rgba(34, 197, 94, 0.6)');
  grad.addColorStop(0.7, 'rgba(34, 197, 94, 0.2)');
  grad.addColorStop(1, 'rgba(34, 197, 94, 0.05)');
  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.moveTo(sX - 2, sY);
  ctx.lineTo(sX + 2, sY);
  ctx.lineTo(sX + spread, boundaryY);
  ctx.lineTo(sX - spread, boundaryY);
  ctx.closePath();
  ctx.fill();

  // å¢ƒç•Œç·š
  ctx.setLineDash([5, 4]);
  ctx.strokeStyle = '#22c55e';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(doorX + 6, boundaryY);
  ctx.lineTo(doorX + doorW - 6, boundaryY);
  ctx.stroke();
  ctx.setLineDash([]);

  // çŒ«
  drawCat(ctx, sX - 12, floorY - 25 * scale, 25 * scale, '#57534e');

  // ãƒ©ãƒ™ãƒ«
  ctx.font = '10px "Noto Sans JP", sans-serif';
  ctx.fillStyle = '#57534e';
  drawDim(ctx, doorX - 22, floorY, doorTop, h + 'cm');
  ctx.fillStyle = '#78716c';
  ctx.textAlign = 'left';
  ctx.fillText(exH + 'cm', doorX + doorW + 8, boundaryY + 4);
  ctx.textAlign = 'center';
  ctx.fillStyle = '#16a34a';
  ctx.fillText('æ¤œçŸ¥', sX, doorTop + (boundaryY - doorTop) / 2 + 3);
  ctx.fillStyle = '#78716c';
  ctx.fillText('é™¤å¤–', sX, boundaryY + (floorY - boundaryY) / 2 + 3);
}

function drawCat(ctx, x, y, h, c) {
  h = Math.max(h, 12);
  const bL = h * 1.2, bH = h * 0.5, lH = h * 0.35, hR = h * 0.35;
  const bY = y + h - lH - bH / 2;
  const bCX = x + bL / 2;
  const hX = x + bL + hR * 0.3, hY = bY - hR * 0.1;
  const eyeY = hY - hR * 0.15;
  ctx.fillStyle = c;
  ctx.beginPath();
  ctx.ellipse(bCX, bY, bL / 2, bH / 2, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.beginPath();
  ctx.arc(hX, hY, hR, 0, Math.PI * 2);
  ctx.fill();
  ctx.beginPath();
  ctx.moveTo(hX - hR * 0.7, hY - hR * 0.2);
  ctx.lineTo(hX - hR * 0.35, hY - hR * 1.3);
  ctx.lineTo(hX, hY - hR * 0.4);
  ctx.fill();
  ctx.beginPath();
  ctx.moveTo(hX, hY - hR * 0.4);
  ctx.lineTo(hX + hR * 0.35, hY - hR * 1.3);
  ctx.lineTo(hX + hR * 0.7, hY - hR * 0.2);
  ctx.fill();
  ctx.fillStyle = '#fff';
  ctx.beginPath();
  ctx.ellipse(hX - hR * 0.3, eyeY, hR * 0.12, hR * 0.15, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.beginPath();
  ctx.ellipse(hX + hR * 0.3, eyeY, hR * 0.12, hR * 0.15, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.strokeStyle = '#fff';
  ctx.lineWidth = Math.max(1, h * 0.02);
  ctx.lineCap = 'round';
  ctx.beginPath();
  ctx.arc(hX - hR * 0.15, hY + hR * 0.35, hR * 0.15, Math.PI, 0, true);
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(hX + hR * 0.15, hY + hR * 0.35, hR * 0.15, Math.PI, 0, true);
  ctx.stroke();
  ctx.fillStyle = c;
  const lW = h * 0.1;
  ctx.fillRect(x + bL * 0.2 - lW / 2, bY + bH / 4, lW, lH);
  ctx.fillRect(x + bL * 0.4 - lW / 2, bY + bH / 4, lW, lH);
  ctx.fillRect(x + bL * 0.6 - lW / 2, bY + bH / 4, lW, lH);
  ctx.fillRect(x + bL * 0.8 - lW / 2, bY + bH / 4, lW, lH);
  ctx.strokeStyle = c;
  ctx.lineWidth = h * 0.08;
  ctx.lineCap = 'round';
  ctx.beginPath();
  ctx.moveTo(x, bY);
  ctx.quadraticCurveTo(x - h * 0.25, bY - h * 0.35, x - h * 0.05, bY - h * 0.55);
  ctx.stroke();
}

function drawDim(ctx, x, y1, y2, label) {
  ctx.strokeStyle = '#a8a29e';
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(x, y1);
  ctx.lineTo(x, y2);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(x - 3, y1);
  ctx.lineTo(x + 3, y1);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(x - 3, y2);
  ctx.lineTo(x + 3, y2);
  ctx.stroke();
  ctx.save();
  ctx.translate(x, (y1 + y2) / 2);
  ctx.rotate(-Math.PI / 2);
  ctx.fillStyle = '#78716c';
  ctx.font = '11px "Noto Sans JP"';
  ctx.textAlign = 'center';
  ctx.fillText(label, 0, -6);
  ctx.restore();
}

updateDiagram();
  </script>
</body>
</html>