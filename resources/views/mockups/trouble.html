<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ•…éšœãƒ»äº¤æ›ç”³è«‹ - ã¿ã¾ã‚‚ã‚Šãƒ‡ãƒã‚¤ã‚¹ï¼ˆä»®ï¼‰</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
:root {
  --white: #ffffff; --cream: #faf9f7; --beige: #f5f3ef;
  --gray-100: #f0eeea; --gray-200: #e5e2dc; --gray-300: #d1ccc3;
  --gray-400: #a8a29e; --gray-500: #78716c; --gray-600: #57534e;
  --gray-700: #44403c; --gray-800: #292524;
  --green-light: #dcfce7; --green: #22c55e; --green-dark: #16a34a;
  --yellow-light: #fef9c3;
  --red-light: #fef2f2; --red: #ef4444; --red-dark: #dc2626;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.04); --shadow: 0 4px 20px rgba(0,0,0,0.06);
  --radius: 8px; --radius-lg: 12px;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Noto Sans JP', sans-serif; background: var(--cream); color: var(--gray-800); min-height: 100vh; line-height: 1.7; }

.header { background: var(--white); border-bottom: 1px solid var(--gray-100); position: sticky; top: 0; z-index: 100; }
.header-inner { max-width: 640px; margin: 0 auto; padding: 12px 20px; display: flex; align-items: center; justify-content: space-between; }
.back-btn { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; background: var(--beige); border: none; border-radius: 8px; cursor: pointer; font-size: 18px; transition: all 0.2s; margin-right: 8px; text-decoration: none; color: inherit; }
.back-btn:hover { background: var(--gray-200); }
.header-title { font-size: 16px; font-weight: 500; }
.header-btn { padding: 8px 12px; font-size: 13px; color: var(--gray-600); background: transparent; border: none; border-radius: var(--radius); text-decoration: none; }
.header-btn:hover { background: var(--beige); color: var(--gray-800); }

.container { max-width: 640px; margin: 0 auto; padding: 24px 20px 100px; }

.steps { display: flex; align-items: center; justify-content: center; margin-bottom: 32px; }
.step { display: flex; align-items: center; gap: 8px; }
.step-number { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700; border: 2px solid transparent; }
.step.active .step-number { background: var(--gray-800); color: var(--white); }
.step.done .step-number { background: var(--green); color: var(--white); }
.step.pending .step-number { background: var(--gray-200); color: var(--gray-500); border-color: var(--gray-300); }
.step-label { font-size: 13px; font-weight: 500; color: var(--gray-500); }
.step.active .step-label { color: var(--gray-800); font-weight: 600; }
.step.done .step-label { color: var(--green-dark); font-weight: 600; }
.step-line { width: 40px; height: 3px; background: var(--gray-200); margin: 0 12px; border-radius: 2px; }
.step-line.done { background: var(--green); }

.card { background: var(--white); border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); overflow: hidden; border: 1px solid var(--gray-200); padding: 24px; margin-bottom: 20px; }
.card-title { font-size: 17px; font-weight: 700; margin-bottom: 24px; display: flex; align-items: center; gap: 10px; color: var(--gray-800); padding-bottom: 16px; border-bottom: 2px solid var(--gray-200); }

.form-group { margin-bottom: 20px; }
.form-label { display: block; font-size: 13px; font-weight: 600; color: var(--gray-700); margin-bottom: 8px; }
.form-input { width: 100%; padding: 14px 16px; font-size: 15px; font-family: inherit; border: 1px solid var(--gray-300); border-radius: var(--radius); background: var(--cream); color: var(--gray-800); }
.form-input:disabled { background: var(--gray-100); color: var(--gray-600); cursor: not-allowed; font-weight: 500; }
.form-hint { font-size: 12px; color: var(--gray-500); margin-top: 6px; font-weight: 500; }
.form-hint a { color: var(--gray-600); }
.form-textarea { width: 100%; padding: 14px 16px; font-size: 15px; font-family: inherit; border: 1px solid var(--gray-300); border-radius: var(--radius); background: var(--cream); color: var(--gray-800); resize: vertical; min-height: 100px; }
.form-textarea:focus { outline: none; border-color: var(--gray-500); background: var(--white); }

.readonly-field { display: flex; align-items: center; padding: 14px 16px; background: var(--beige); border-radius: var(--radius); font-size: 15px; font-weight: 600; border: 1px solid var(--gray-200); }
.readonly-field .lock-icon { margin-left: auto; font-size: 14px; color: var(--gray-400); }

.diagnosis-box { background: var(--yellow-light); border-radius: var(--radius); padding: 18px; margin-bottom: 24px; border: 1px solid #fde68a; }
.diagnosis-title { font-size: 14px; font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; color: var(--gray-800); }
.diagnosis-content { font-size: 14px; color: var(--gray-700); line-height: 1.8; font-weight: 500; }
.diagnosis-content strong { color: var(--gray-800); font-weight: 700; }

.checkbox-group { display: flex; flex-direction: column; gap: 12px; }
.checkbox-item { display: flex; align-items: center; gap: 14px; padding: 16px 18px; background: var(--cream); border-radius: var(--radius); cursor: pointer; transition: all 0.2s; border: 1px solid var(--gray-200); }
.checkbox-item:hover { background: var(--gray-100); border-color: var(--gray-300); }
.checkbox-item.checked { background: var(--green-light); border: 2px solid var(--green); }
.checkbox-box { width: 24px; height: 24px; border: 2px solid var(--gray-300); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700; color: transparent; transition: all 0.2s; flex-shrink: 0; }
.checkbox-item.checked .checkbox-box { background: var(--green); border-color: var(--green); color: var(--white); }
.checkbox-label { font-size: 14px; font-weight: 500; color: var(--gray-800); }

/* ä¸æ­£åˆ©ç”¨é€šå ±ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
.checkbox-item.abuse { border-color: var(--red); background: var(--red-light); }
.checkbox-item.abuse:hover { background: #fee2e2; }
.checkbox-item.abuse.checked { background: var(--red-light); border: 2px solid var(--red); }
.checkbox-item.abuse.checked .checkbox-box { background: var(--red); border-color: var(--red); }
.checkbox-item.abuse .checkbox-label { color: var(--red-dark); }

.notice { background: var(--beige); border-radius: var(--radius); padding: 18px; font-size: 14px; color: var(--gray-700); line-height: 1.8; border: 1px solid var(--gray-200); }
.notice-title { font-weight: 700; color: var(--gray-800); margin-bottom: 10px; }
.notice ul { margin-left: 20px; }
.notice li { margin-bottom: 4px; font-weight: 500; }

/* ä¸æ­£åˆ©ç”¨é€šå ±ç”¨ã®è­¦å‘Šãƒœãƒƒã‚¯ã‚¹ */
.abuse-notice { background: var(--red-light); border-radius: var(--radius); padding: 18px; font-size: 14px; color: var(--gray-700); line-height: 1.8; border: 1px solid #fecaca; margin-bottom: 20px; }
.abuse-notice-title { font-weight: 700; color: var(--red-dark); margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
.abuse-notice ul { margin-left: 20px; margin-bottom: 12px; }
.abuse-notice li { margin-bottom: 4px; font-weight: 500; }
.abuse-notice p { font-weight: 500; }
.abuse-notice strong { color: var(--red-dark); }

.btn { display: block; width: 100%; padding: 16px 24px; font-size: 16px; font-weight: 600; font-family: inherit; border: none; border-radius: var(--radius); cursor: pointer; transition: all 0.2s ease; text-decoration: none; text-align: center; }
.btn-primary { background: var(--gray-800); color: var(--white); }
.btn-primary:hover { background: var(--gray-700); transform: translateY(-1px); box-shadow: var(--shadow); }
.btn-secondary { background: var(--beige); color: var(--gray-700); border: 1px solid var(--gray-200); }
.btn-secondary:hover { background: var(--gray-100); }
.btn-danger { background: var(--red); color: var(--white); }
.btn-danger:hover { background: var(--red-dark); }

.complete-card { text-align: center; padding: 48px 24px; }
.complete-icon { font-size: 64px; margin-bottom: 20px; }
.complete-title { font-size: 22px; font-weight: 700; margin-bottom: 12px; color: var(--gray-800); }
.complete-text { font-size: 14px; color: var(--gray-600); margin-bottom: 28px; line-height: 1.8; font-weight: 500; }
.complete-info { background: var(--beige); border-radius: var(--radius); padding: 18px; text-align: left; margin-bottom: 28px; border: 1px solid var(--gray-200); }
.complete-info-item { display: flex; justify-content: space-between; padding: 10px 0; font-size: 14px; border-bottom: 1px solid var(--gray-200); }
.complete-info-item:last-child { border-bottom: none; }
.complete-info-label { color: var(--gray-600); font-weight: 500; }
.complete-info-value { font-weight: 700; color: var(--gray-800); }
.home-btn { display: inline-block; padding: 16px 36px; font-size: 15px; font-weight: 700; color: var(--gray-700); background: var(--beige); border: 1px solid var(--gray-300); border-radius: var(--radius); text-decoration: none; transition: all 0.2s; }
.home-btn:hover { background: var(--gray-200); }

.hidden { display: none !important; }

.divider { border: none; border-top: 1px dashed var(--gray-300); margin: 20px 0; }
.section-subtitle { font-size: 12px; font-weight: 600; color: var(--gray-500); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <div style="display:flex;align-items:center;">
        <a href="mypage.html" class="back-btn">â†</a>
        <span class="header-title">æ•…éšœãƒ»äº¤æ›ç”³è«‹</span>
      </div>
      <a href="mypage.html" class="header-btn">ãƒã‚¤ãƒšãƒ¼ã‚¸</a>
    </div>
  </header>

  <div class="container">
    <div class="steps" id="stepsIndicator">
      <div class="step active" id="stepInd1"><span class="step-number">1</span><span class="step-label">ç—‡çŠ¶</span></div>
      <div class="step-line" id="stepLine1"></div>
      <div class="step pending" id="stepInd2"><span class="step-number">2</span><span class="step-label">é€ä»˜å…ˆ</span></div>
      <div class="step-line" id="stepLine2"></div>
      <div class="step pending" id="stepInd3"><span class="step-number">3</span><span class="step-label">å®Œäº†</span></div>
    </div>

    <div id="step1" class="step-content">
      <div class="card">
        <h2 class="card-title">ğŸ” ç—‡çŠ¶ã‚’é¸æŠ</h2>
        <div class="diagnosis-box">
          <p class="diagnosis-title">ğŸ“Š è‡ªå‹•è¨ºæ–­çµæœ</p>
          <div class="diagnosis-content">æœ€çµ‚é€šä¿¡: <strong>3æ—¥å‰</strong><br>æœ€çµ‚é›»åœ§: <strong>2.1Vï¼ˆä½ä¸‹å‚¾å‘ï¼‰</strong><br>â†’ é›»æ± åˆ‡ã‚Œã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</div>
        </div>
        <div class="form-group">
          <label class="form-label">å“ç•ª</label>
          <div class="readonly-field"><span>A3K9X2</span><span class="lock-icon">ğŸ”’</span></div>
          <p class="form-hint">ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‹ã‚‰è‡ªå‹•å–å¾—</p>
        </div>
        <div class="form-group">
          <p class="section-subtitle">æ•…éšœãƒ»ä¸å…·åˆ</p>
          <div class="checkbox-group">
            <div class="checkbox-item" onclick="toggleCheckbox(this, 'normal')"><span class="checkbox-box"></span><span class="checkbox-label">LEDãŒç‚¹ç¯ã—ãªã„</span></div>
            <div class="checkbox-item" onclick="toggleCheckbox(this, 'normal')"><span class="checkbox-box"></span><span class="checkbox-label">èµ¤ç‚¹æ»…ãŒæ­¢ã¾ã‚‰ãªã„</span></div>
            <div class="checkbox-item" onclick="toggleCheckbox(this, 'normal')"><span class="checkbox-box"></span><span class="checkbox-label">æ¤œçŸ¥ã•ã‚Œãªã„ï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«åæ˜ ã•ã‚Œãªã„ï¼‰</span></div>
            <div class="checkbox-item" onclick="toggleCheckbox(this, 'normal')"><span class="checkbox-box"></span><span class="checkbox-label">é›»æ± äº¤æ›ã—ã¦ã‚‚æ”¹å–„ã—ãªã„</span></div>
            <div class="checkbox-item" onclick="toggleCheckbox(this, 'normal')"><span class="checkbox-box"></span><span class="checkbox-label">ãã®ä»–ã®ä¸å…·åˆ</span></div>
          </div>
        </div>
        
        <hr class="divider">
        
        <div class="form-group">
          <p class="section-subtitle">âš ï¸ ãã®ä»–ã®ã”ç›¸è«‡</p>
          <div class="checkbox-group">
            <div class="checkbox-item abuse" onclick="toggleCheckbox(this, 'abuse')"><span class="checkbox-box"></span><span class="checkbox-label">ä¸æ­£åˆ©ç”¨ãƒ»æ‚ªç”¨ã«é–¢ã™ã‚‹ç›¸è«‡</span></div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">è©³ç´°ï¼ˆä»»æ„ï¼‰</label>
          <textarea class="form-textarea" id="detailText" placeholder="ç—‡çŠ¶ã®è©³ç´°ãŒã‚ã‚Œã°å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
        </div>
        <button class="btn btn-primary" onclick="handleNext()">æ¬¡ã¸</button>
      </div>
    </div>

    <div id="step2" class="step-content hidden">
      <div class="card">
        <h2 class="card-title">ğŸ“¦ é€ä»˜å…ˆç¢ºèª</h2>
        <div class="form-group"><label class="form-label">éƒµä¾¿ç•ªå·</label><input type="text" class="form-input" value="370-0001" disabled></div>
        <div class="form-group"><label class="form-label">ä½æ‰€</label><input type="text" class="form-input" value="ç¾¤é¦¬çœŒé«˜å´å¸‚ã€‡ã€‡ç”º1-2-3" disabled></div>
        <div class="form-group"><label class="form-label">å»ºç‰©åãƒ»éƒ¨å±‹ç•ªå·</label><input type="text" class="form-input" value="ã€‡ã€‡ãƒãƒ³ã‚·ãƒ§ãƒ³ 301å·å®¤" disabled></div>
        <div class="form-group"><label class="form-label">æ°å</label><input type="text" class="form-input" value="å±±ç”° å¤ªéƒ" disabled></div>
        <p class="form-hint" style="margin-bottom:20px">â€»ä½æ‰€ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã¯<a href="#">ã“ã¡ã‚‰</a>ã‹ã‚‰</p>
        <div class="notice">
          <p class="notice-title">ğŸ“‹ æ³¨æ„äº‹é …</p>
          <ul><li>ä»£æ›¿å“ã¯1ã€œ3å–¶æ¥­æ—¥ä»¥å†…ã«ç™ºé€ã—ã¾ã™</li><li>æ•…éšœå“ã®è¿”é€ã¯ä¸è¦ã§ã™ï¼ˆå»ƒæ£„OKï¼‰</li><li>é€æ–™ã¯ç„¡æ–™ã§ã™</li></ul>
        </div>
        <div style="display:flex;gap:12px;margin-top:24px;">
          <button class="btn btn-secondary" onclick="goToStep(1)" style="margin-top:0;">æˆ»ã‚‹</button>
          <button class="btn btn-primary" onclick="goToStep(3)" style="margin-top:0;">ç”³è«‹ã™ã‚‹</button>
        </div>
      </div>
    </div>

    <div id="step3" class="step-content hidden">
      <div class="card complete-card">
        <div class="complete-icon">âœ…</div>
        <h2 class="complete-title">ç”³è«‹ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸ</h2>
        <p class="complete-text">ä»£æ›¿å“ã‚’1ã€œ3å–¶æ¥­æ—¥ä»¥å†…ã«ç™ºé€ã—ã¾ã™ã€‚<br>ç™ºé€å®Œäº†æ™‚ã«ãƒ¡ãƒ¼ãƒ«ã§ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚</p>
        <div class="complete-info">
          <div class="complete-info-item"><span class="complete-info-label">å—ä»˜ç•ªå·</span><span class="complete-info-value">RMA-2025-00142</span></div>
          <div class="complete-info-item"><span class="complete-info-label">æ—§å“ç•ª</span><span class="complete-info-value">A3K9X2</span></div>
          <div class="complete-info-item"><span class="complete-info-label">ç™ºé€äºˆå®š</span><span class="complete-info-value">1ã€œ3å–¶æ¥­æ—¥</span></div>
        </div>
        <a href="mypage.html" class="home-btn">ãƒã‚¤ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
      </div>
    </div>

    <!-- ä¸æ­£åˆ©ç”¨é€šå ±ç”¨ã®ç”»é¢ -->
    <div id="stepAbuse" class="step-content hidden">
      <div class="card">
        <h2 class="card-title">âš ï¸ ä¸æ­£åˆ©ç”¨ãƒ»æ‚ªç”¨ã®ã”ç›¸è«‡</h2>
        
        <div class="abuse-notice">
          <p class="abuse-notice-title">âš ï¸ å¯¾å¿œç¯„å›²ã«ã¤ã„ã¦</p>
          <ul>
            <li>å½“æ–¹ã§å¯¾å¿œã§ãã‚‹ã®ã¯ã€<strong>ã”æœ¬äººã®ãƒ‡ãƒã‚¤ã‚¹åœæ­¢ãƒ»ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤</strong>ã®ã¿ã§ã™</li>
            <li>ç¬¬ä¸‰è€…ã®ãƒ‡ãƒã‚¤ã‚¹ã«ã¤ã„ã¦ã¯ã€å“ç•ªãŒä¸æ˜ãªãŸã‚å¯¾å¿œãŒå›°é›£ã§ã™</li>
            <li>æ·±åˆ»ãªè¢«å®³ï¼ˆã‚¹ãƒˆãƒ¼ã‚«ãƒ¼ã€DVç­‰ï¼‰ã®å ´åˆã¯ã€<strong>è­¦å¯Ÿã¸ã®ç›¸è«‡ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™</strong></li>
          </ul>
          <p>ğŸ“ è­¦å¯Ÿç›¸è«‡ãƒ€ã‚¤ãƒ¤ãƒ«: <strong>#9110</strong></p>
        </div>
        
        <div class="form-group">
          <label class="form-label">ã”ç›¸è«‡å†…å®¹</label>
          <div class="checkbox-group">
            <div class="checkbox-item" onclick="toggleCheckbox(this, 'abuse-detail')"><span class="checkbox-box"></span><span class="checkbox-label">è‡ªåˆ†ã®ãƒ‡ãƒã‚¤ã‚¹ã‚’åœæ­¢ãƒ»å‰Šé™¤ã—ãŸã„</span></div>
            <div class="checkbox-item" onclick="toggleCheckbox(this, 'abuse-detail')"><span class="checkbox-box"></span><span class="checkbox-label">åŒæ„ãªãè¨­ç½®ã•ã‚ŒãŸå¯èƒ½æ€§ãŒã‚ã‚‹</span></div>
            <div class="checkbox-item" onclick="toggleCheckbox(this, 'abuse-detail')"><span class="checkbox-box"></span><span class="checkbox-label">ç¬¬ä¸‰è€…ã«ã‚ˆã‚‹æ‚ªç”¨ã‚’ç™ºè¦‹ã—ãŸ</span></div>
            <div class="checkbox-item" onclick="toggleCheckbox(this, 'abuse-detail')"><span class="checkbox-box"></span><span class="checkbox-label">ãã®ä»–</span></div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">è©³ç´°ã‚’ã”è¨˜å…¥ãã ã•ã„</label>
          <textarea class="form-textarea" id="abuseDetailText" placeholder="çŠ¶æ³ã‚’è©³ã—ããŠçŸ¥ã‚‰ã›ãã ã•ã„..."></textarea>
        </div>
        
        <div class="form-group">
          <label class="form-label">ã”é€£çµ¡å…ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
          <input type="email" class="form-input" id="abuseEmail" placeholder="example@example.com">
          <p class="form-hint">ã”å›ç­”ã‚’ãŠé€ã‚Šã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
        </div>
        
        <div style="display:flex;gap:12px;margin-top:24px;">
          <button class="btn btn-secondary" onclick="goToStep(1)" style="margin-top:0;">æˆ»ã‚‹</button>
          <button class="btn btn-danger" onclick="submitAbuseReport()" style="margin-top:0;">é€ä¿¡ã™ã‚‹</button>
        </div>
      </div>
    </div>

    <!-- ä¸æ­£åˆ©ç”¨é€šå ±å®Œäº†ç”»é¢ -->
    <div id="stepAbuseComplete" class="step-content hidden">
      <div class="card complete-card">
        <div class="complete-icon">ğŸ“¨</div>
        <h2 class="complete-title">ã”ç›¸è«‡ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸ</h2>
        <p class="complete-text">å†…å®¹ã‚’ç¢ºèªã®ä¸Šã€3å–¶æ¥­æ—¥ä»¥å†…ã«ãƒ¡ãƒ¼ãƒ«ã§ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚<br><br>ç·Šæ€¥ã®å ´åˆã¯ã€è­¦å¯Ÿç›¸è«‡ãƒ€ã‚¤ãƒ¤ãƒ« <strong>#9110</strong> ã¸ã”é€£çµ¡ãã ã•ã„ã€‚</p>
        <a href="mypage.html" class="home-btn">ãƒã‚¤ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
      </div>
    </div>
  </div>

  <script>
let isAbuseMode = false;

function toggleCheckbox(el, type) {
  // abuseé¸æŠæ™‚ã¯ä»–ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™ã€é€†ã‚‚åŒæ§˜
  if (type === 'abuse') {
    // é€šå¸¸ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’å…¨éƒ¨å¤–ã™
    document.querySelectorAll('.checkbox-item:not(.abuse)').forEach(item => {
      item.classList.remove('checked');
      item.querySelector('.checkbox-box').textContent = '';
    });
    el.classList.toggle('checked');
    el.querySelector('.checkbox-box').textContent = el.classList.contains('checked') ? 'âœ“' : '';
    isAbuseMode = el.classList.contains('checked');
  } else if (type === 'normal') {
    // ä¸æ­£åˆ©ç”¨ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™
    document.querySelectorAll('.checkbox-item.abuse').forEach(item => {
      item.classList.remove('checked');
      item.querySelector('.checkbox-box').textContent = '';
    });
    isAbuseMode = false;
    el.classList.toggle('checked');
    el.querySelector('.checkbox-box').textContent = el.classList.contains('checked') ? 'âœ“' : '';
  } else {
    // abuse-detail: å˜ç´”ã«ãƒˆã‚°ãƒ«
    el.classList.toggle('checked');
    el.querySelector('.checkbox-box').textContent = el.classList.contains('checked') ? 'âœ“' : '';
  }
}

function handleNext() {
  if (isAbuseMode) {
    // ä¸æ­£åˆ©ç”¨ãƒ¢ãƒ¼ãƒ‰
    document.getElementById('stepsIndicator').classList.add('hidden');
    document.querySelectorAll('.step-content').forEach(c => c.classList.add('hidden'));
    document.getElementById('stepAbuse').classList.remove('hidden');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  } else {
    // é€šå¸¸ã®äº¤æ›ãƒ•ãƒ­ãƒ¼
    goToStep(2);
  }
}

function goToStep(step) {
  document.getElementById('stepsIndicator').classList.remove('hidden');
  document.querySelectorAll('.step-content').forEach(c => c.classList.add('hidden'));
  document.getElementById('step' + step).classList.remove('hidden');
  for (let i = 1; i <= 3; i++) {
    const ind = document.getElementById('stepInd' + i);
    ind.classList.remove('active', 'done', 'pending');
    if (i < step) ind.classList.add('done');
    else if (i === step) ind.classList.add('active');
    else ind.classList.add('pending');
  }
  for (let i = 1; i <= 2; i++) {
    const line = document.getElementById('stepLine' + i);
    if (i < step) line.classList.add('done');
    else line.classList.remove('done');
  }
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function submitAbuseReport() {
  const email = document.getElementById('abuseEmail').value;
  const detail = document.getElementById('abuseDetailText').value;
  
  if (!email) {
    alert('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
    return;
  }
  if (!detail) {
    alert('è©³ç´°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
    return;
  }
  
  // é€ä¿¡å‡¦ç†ï¼ˆå®Ÿéš›ã¯APIã‚³ãƒ¼ãƒ«ï¼‰
  document.querySelectorAll('.step-content').forEach(c => c.classList.add('hidden'));
  document.getElementById('stepAbuseComplete').classList.remove('hidden');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
  </script>
</body>
</html>
